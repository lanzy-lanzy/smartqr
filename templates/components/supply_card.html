{% comment %}
Supply Card Component
Usage: {% include 'components/supply_card.html' with supply=supply_object %}
{% endcomment %}

<div class="group overflow-hidden rounded-lg bg-slate-950/50 border border-slate-800 hover:border-slate-700 transition-all cursor-pointer"
     up-target="main" up-follow
     up-href="{% url 'supply_detail' supply.id %}">
    
    <!-- Image Container -->
    <div class="relative h-32 overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900">
        {% if supply.image %}
        <img src="{{ supply.image.url }}" alt="{{ supply.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
        {% else %}
        <div class="w-full h-full flex items-center justify-center bg-slate-900">
            <i data-lucide="package" class="w-8 h-8 text-slate-700"></i>
        </div>
        {% endif %}

        <!-- Quick Actions Overlay -->
        {% if user.role == 'admin' or user.role == 'gso_staff' %}
        <div class="absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10" onclick="event.stopPropagation()">
            <a href="{% url 'supply_edit' supply.id %}" up-follow class="p-1.5 rounded-md bg-black/50 hover:bg-black/70 text-white text-sm transition-all" title="Edit">
                <i data-lucide="edit-2" class="w-3 h-3"></i>
            </a>
            <button type="button" 
                    hx-post="{% url 'supply_delete' supply.id %}" 
                    hx-confirm="Delete this supply?" 
                    hx-target="closest .group" 
                    hx-swap="outerHTML"
                    class="p-1.5 rounded-md bg-black/50 hover:bg-black/70 text-white text-sm transition-all" title="Delete">
                <i data-lucide="trash-2" class="w-3 h-3"></i>
            </button>
        </div>
        {% endif %}
    </div>
    
    <!-- Content -->
    <div class="p-4">
        <!-- Category Badge -->
        <div class="inline-block mb-2 px-2 py-0.5 rounded text-xs font-medium bg-slate-800 text-slate-400">
            {{ supply.category.name }}
        </div>
        
        <!-- Title -->
        <h3 class="font-medium text-white text-sm line-clamp-2 mb-3 group-hover:text-slate-200 transition-colors">
            {{ supply.name }}
        </h3>
        
        <!-- Quantity Info -->
        <div class="flex items-end justify-between mb-3">
            <div>
                <p class="text-xs text-slate-500 mb-0.5">Available</p>
                <p class="text-lg font-semibold text-white">{{ supply.available_quantity }}</p>
            </div>
            <div class="text-right">
                <p class="text-xs text-slate-500 mb-0.5">Unit</p>
                <p class="text-xs font-medium text-slate-400">{{ supply.unit }}</p>
            </div>
        </div>
        
        <!-- Stock Status -->
        <div class="flex items-center gap-2 text-xs">
            {% if supply.is_out_of_stock %}
            <span class="flex-1 px-2 py-1 rounded bg-red-500/10 text-red-400 text-center font-medium">Out</span>
            {% elif supply.is_low_stock %}
            <span class="flex-1 px-2 py-1 rounded bg-amber-500/10 text-amber-400 text-center font-medium">Low</span>
            {% else %}
            <span class="flex-1 px-2 py-1 rounded bg-green-500/10 text-green-400 text-center font-medium">In Stock</span>
            {% endif %}
            <i data-lucide="arrow-right" class="w-3 h-3 text-slate-600 group-hover:text-slate-400 transition-colors flex-shrink-0"></i>
        </div>
    </div>
</div>
